<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NASA TLX - Avaliação</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1f2937, #111827);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    color: white;
}

.container {
    background: #1f2937;
    padding: 30px;
    border-radius: 12px;
    width: 100%;
    max-width: 600px;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

label {
    display: block;
    margin-top: 15px;
    font-size: 14px;
}

input[type="text"],
input[type="email"] {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border-radius: 6px;
    border: none;
}

input[type="range"] {
    width: 100%;
}

.range-value {
    text-align: right;
    font-size: 13px;
    margin-bottom: 10px;
}

button {
    margin-top: 20px;
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 8px;
    background-color: #2563eb;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

button:hover {
    background-color: #1d4ed8;
}

.resultado {
    margin-top: 20px;
    padding: 15px;
    background-color: #111827;
    border-radius: 8px;
    text-align: center;
}
</style>
</head>
<body>

<div class="container">
    <h1>NASA TLX</h1>

    <label>Nome</label>
    <input type="text" id="nome" required>

    <label>Email</label>
    <input type="email" id="email" required>

    <!-- SLIDERS 0-100 -->

    <label>Atividade Mental</label>
    <input type="range" min="0" max="100" id="mental" oninput="updateValue(this)">
    <div class="range-value" id="mental-value">50</div>

    <label>Atividade Física</label>
    <input type="range" min="0" max="100" id="fisica" oninput="updateValue(this)">
    <div class="range-value" id="fisica-value">50</div>

    <label>Pressão Temporal</label>
    <input type="range" min="0" max="100" id="temporal" oninput="updateValue(this)">
    <div class="range-value" id="temporal-value">50</div>

    <label>Desempenho</label>
    <input type="range" min="0" max="100" id="desempenho" oninput="updateValue(this)">
    <div class="range-value" id="desempenho-value">50</div>

    <label>Esforço</label>
    <input type="range" min="0" max="100" id="esforco" oninput="updateValue(this)">
    <div class="range-value" id="esforco-value">50</div>

    <label>Frustração</label>
    <input type="range" min="0" max="100" id="frustracao" oninput="updateValue(this)">
    <div class="range-value" id="frustracao-value">50</div>

    <button onclick="enviarFormulario()">Enviar</button>

    <div class="resultado" id="resultado"></div>
</div>

<script>
function updateValue(element) {
    document.getElementById(element.id + "-value").innerText = element.value;
}

async function enviarFormulario() {

    const dados = {
        nome: document.getElementById("nome").value,
        email: document.getElementById("email").value,
        mental: Number(document.getElementById("mental").value),
        fisica: Number(document.getElementById("fisica").value),
        temporal: Number(document.getElementById("temporal").value),
        desempenho: Number(document.getElementById("desempenho").value),
        esforco: Number(document.getElementById("esforco").value),
        frustracao: Number(document.getElementById("frustracao").value)
    };

    try {
        const resposta = await fetch("http://127.0.0.1:5000/nasa", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(dados)
        });

        const resultado = await resposta.json();

        document.getElementById("resultado").innerHTML =
            "<strong>Resultado:</strong><br>" +
            "TLX: " + resultado.tlx_raw.toFixed(2) +
            "<br>Classificação: " + resultado.classificacao;

    } catch (erro) {
        document.getElementById("resultado").innerHTML =
            "Erro ao conectar com o servidor.";
    }
}
</script>

</body>
</html>